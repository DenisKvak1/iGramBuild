/*! For license information please see iGram.js.LICENSE.txt */
(()=>{var t={736:(t,e,n)=>{"use strict";n.d(e,{c:()=>a});var r=n(500),o=n.n(r),i=n(312),s=n.n(i)()(o());s.push([t.id,".sidePanel{\n    display: flex;\n    flex-direction: column;\n    gap: 5px;\n}\n.leaveButton{\n    margin-top: 3px;\n}\n.sidePanel .loadPhotoBtn{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n.filePhotoLoad2 {\n    display: none;\n}",""]);const a=s},160:(t,e,n)=>{"use strict";n.d(e,{c:()=>a});var r=n(500),o=n.n(r),i=n(312),s=n.n(i)()(o());s.push([t.id,".addFriend button{\n    white-space: nowrap;\n    height: 100% !important;\n}\n.addFriend{\n    display: flex;\n    gap: 2px;\n    padding: 5px 1px;\n}\n.addFriend input{\n    height: 35px;\n}",""]);const a=s},532:(t,e,n)=>{"use strict";n.d(e,{c:()=>a});var r=n(500),o=n.n(r),i=n(312),s=n.n(i)()(o());s.push([t.id,".authForm{\n    display: flex;\n    flex-direction: column;\n    gap: 3px;\n    width: 100%;\n    max-width: 435px;\n}\n.authBlock{\n    display: flex;\n    flex-wrap: wrap;\n    gap: 15px;\n    padding: 3px;\n}\n@media (min-width: 435px) {\n    .authForm{\n        width: 50%;\n        max-width: 250px;\n    }\n    .authBlock{\n        flex-wrap: nowrap;\n    }\n}",""]);const a=s},474:(t,e,n)=>{"use strict";n.d(e,{c:()=>a});var r=n(500),o=n.n(r),i=n(312),s=n.n(i)()(o());s.push([t.id,".chat {\n    width: 100%;\n    height: 100vh;\n    background-color: rgba(167, 167, 255, 0.329);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding: 10px 7% 15px 5%;\n    gap: 20px;\n}\n.chat .chatPhoto {\n    height: 50px;\n    width: 50px;\n    border-radius: 50%;\n}\n.chat .chatInfoBlock {\n    min-width: 200px;\n    height: 50px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n}\n.mainMessageBlock {\n    width: 100%;\n    flex-grow: 1;\n    overflow: auto;\n    display: flex;\n    flex-direction: column;\n    gap: 9px;\n}\n.message {\n    max-width: 400px;\n    display: flex;\n    gap: 10px;\n    font-family: Arial, Helvetica, sans-serif;\n    align-self: end;\n}\n.messageData{\n    padding: 5px 10px 2px ;\n    background-color: rgb(252, 255, 205);\n    border-radius: 5px;\n}\n.message_date{\n    text-align: right;\n    font-size: 14px;\n    color: #424242;\n}\n.from {\n    align-self: flex-start;\n}\n.from .messageData{\n    background-color: aqua;\n}\n.sendBlock {\n    width: 100%;\n    display: flex;\n    gap: 8px;\n}\n\n.sendBlock input {\n    width: 100%;\n}\n.sendBlock button{\n    height: 100% !important;\n    background-color: rgba(86, 139, 255, 0.699) !important;\n    border: none !important;\n    border-radius: 5px !important;\n    width: auto !important;\n}\n.message_text{\n    word-wrap: break-word;\n}\n.message_name{\n    color: rgba(0, 151, 193, 0.54);\n    font-size: 12px;\n    font-weight: 600;\n    margin-bottom: 2px;\n}\n.from .message_name{\n    color: rgba(255, 145, 0, 0.87);\n}\n.chat_name {\n    font-weight: 600;\n    font-size: 18.75px;\n    font-family: Arial;\n    white-space: nowrap;\n}\n.filePhotoLoad {\n    display: none;\n}\n.confingForm {\n    display: inline-block;\n    margin-bottom: 0;\n}\n.loadPhotoBtn{\n    display: flex;\n    justify-self: center;\n    align-items: center;\n    cursor: pointer;\n    font-size: 14px;\n    background-color: rgba(211, 211, 211, 0.267);\n    color: #424242;\n    border: none;\n    border-radius: 5px;\n    padding: 0 10px;\n    width: 100%;\n    height: 30px;\n    font-family: Arial;\n    white-space: nowrap;\n}\n.addToGroup{\n    white-space: nowrap;\n}\n.userPhoto{\n    border-radius: 50%;\n    height: 57px;\n    width: 57px;\n}",""]);const a=s},192:(t,e,n)=>{"use strict";n.d(e,{c:()=>a});var r=n(500),o=n.n(r),i=n(312),s=n.n(i)()(o());s.push([t.id,".chatList {\n    display: flex;\n    flex-direction: column;\n}\n.chatItem {\n    display: flex;\n    align-items: center;\n    min-width: 375px;\n    height: 87.5px;\n    gap: 10px;\n    background-color: rgba(65, 211, 255, 0.247);\n    font-family: Arial, Helvetica, sans-serif;\n    padding: 12.5px;\n    border: 1px solid rgba(95, 111, 255, 0.479);\n    cursor: pointer;\n}\n.chatItemBlock {\n    display: flex;\n    flex-direction: column;\n}\n.chat_name {\n    font-weight: 600;\n    font-size: 18.75px;\n}\n.last_message {\n    font-size: 18.75px;\n}\n.chatPhotoInList {\n    height: 100%;\n    width: 62.5px;\n    border-radius: 50%;\n}",""]);const a=s},212:(t,e,n)=>{"use strict";n.d(e,{c:()=>a});var r=n(500),o=n.n(r),i=n(312),s=n.n(i)()(o());s.push([t.id,".memberItem {\n    display: flex;\n    align-items: center;\n    min-width: 340px;\n    height: 72px;\n    gap: 10px;\n    font-family: Arial, Helvetica, sans-serif;\n    padding: 5px;\n    cursor: pointer;\n}\n\n.chat_name {\n    font-weight: 600;\n    font-size: 18.75px;\n    font-family: Arial;\n}\n\n.memberPhotoInList {\n    height: 100%;\n    width: 60px;\n    border-radius: 50%;\n}\n\n.memberItemBlock {\n    display: flex;\n    flex-direction: column;\n}\n.last_online{\n    font-size: 17px;\n}\n.membersText{\n    font-size: 25px;\n    font-family: Arial, Helvetica, sans-serif;\n    font-weight: 600;\n    text-align: center;\n}\n.memberList{\n    padding-top: 3px;\n    display: flex;\n    flex-direction: column;\n    width: 340px;\n    background-color: rgba(187, 187, 187, 0.144);\n    border-radius: 10px;\n    max-height: 100dvh;\n}\n.membersListBlock{\n    overflow-y: auto;\n}",""]);const a=s},126:(t,e,n)=>{"use strict";n.d(e,{c:()=>a});var r=n(500),o=n.n(r),i=n(312),s=n.n(i)()(o());s.push([t.id,".createGroupMenu{\n    min-width: 400px;\n    height: 700px;\n    background-color: rgba(238, 238, 238, 0.493);\n    border-radius: 10px;\n    padding: 30px;\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n}\n.createGroupMenu .chatInfoBlock {\n    display: flex;\n    border-radius: 6px;\n    padding: 5px;\n    width: 100%;\n    height: 55px;\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    background-color: rgba(56, 135, 238, 0.185);\n}\n.createGroupMenu .chatInfoBlock input{\n    width: 45px !important;\n}\n.chatInfoBlock input{\n    height: 100%;\n    width: 43px;\n}\n.chatPhoto {\n    flex-shrink: 0;\n    height: 100%;\n    width: 45px;\n    border-radius: 50%;\n}\n.chat_name {\n    font-weight: 600;\n    font-size: 18.75px;\n    flex-grow: 1;\n}\n.friendsList{\n    display: flex;\n    flex-direction: column;\n    gap: 5px;\n    overflow: auto;\n    flex-grow: 1;\n}\n.nameGropInput{\n    display: flex;\n    align-items: center;\n    gap: 5px;\n}\n.nameGropInput span{\n    white-space: nowrap;\n    font-weight: 600;\n    font-size: 19px;\n}\n.createGroup{\n    height: 50px;\n}",""]);const a=s},424:(t,e,n)=>{"use strict";n.d(e,{c:()=>a});var r=n(500),o=n.n(r),i=n(312),s=n.n(i)()(o());s.push([t.id,".friendListButton{\n    height: 30px;\n}\n.friendsListBlock .chatInfoBlock {\n    border-radius: 6px;\n    padding: 5px;\n    width: 100%;\n    height: 55px;\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    background-color: rgba(56, 135, 238, 0.185);\n}\n.chatInfoBlock input{\n    height: 100%;\n    width: 43px;\n}\n.chatInfoBlock .chatPhoto {\n    height: 100%;\n    width: 45px;\n    border-radius: 50%;\n}\n.chat_name {\n    font-weight: 600;\n    font-size: 18.75px;\n    flex-grow: 1;\n}\n.friendsList{\n    display: flex;\n    flex-direction: column;\n    gap: 5px;\n    overflow: auto;\n    flex-grow: 1;\n}\n.friendsListBlock{\n    min-width: 400px;\n    height: 700px;\n    background-color: rgba(238, 238, 238, 0.493);\n    border-radius: 10px;\n    padding: 30px;\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n}\n.submitFriendButtons{\n    display: flex;\n    gap: 5px;\n}\n.submitFriendButtons button{\n    height: 25px;\n    background-color: rgb(201, 201, 201);\n    color: black;\n}\n.requestForFrend{\n    font-size: 24px;\n    font-family: Arial, Helvetica, sans-serif;\n    font-weight: 600;\n    text-align: center;\n}\n.friendsEmpty{\n    font-size: 24px;\n    font-weight: 600;\n    font-family: Arial, serif;\n}",""]);const a=s},880:(t,e,n)=>{"use strict";n.d(e,{c:()=>a});var r=n(500),o=n.n(r),i=n(312),s=n.n(i)()(o());s.push([t.id,"\n\nbody {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\n.modal {\n    display: none;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    padding: 15px;\n    background-color: #fff;\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\n    border-radius: 5px;\n    z-index: 999;\n    overflow-y: auto;\n    max-height: 80%;\n    max-width: 80%;\n}\n\n.overlay {\n    display: none;\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 998;\n}\n\n.modal-content {\n    overflow-y: auto;\n    word-wrap: break-word;\n}\n\n.close-btn {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    cursor: pointer;\n}\n\n",""]);const a=s},256:(t,e,n)=>{"use strict";n.d(e,{c:()=>a});var r=n(500),o=n.n(r),i=n(312),s=n.n(i)()(o());s.push([t.id,"\n.chatBlock{\n    display: flex;\n}\n.memberList{\n    flex-shrink: 0;\n}",""]);const a=s},904:(t,e,n)=>{"use strict";n.d(e,{c:()=>a});var r=n(500),o=n.n(r),i=n(312),s=n.n(i)()(o());s.push([t.id,"*{\n    box-sizing: border-box;\n}\nbody{\n    padding: 0;\n    margin: 0;\n}\n#app input{\n    padding: 10px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    outline: none;\n    font-size: 16px;\n    transition: border-color 0.3s ease-in-out;\n    width: 100%;\n}\n#app button{\n    cursor: pointer;\n    font-size: 14px;\n    background-color: rgba(211, 211, 211, 0.267);\n    color: #424242;\n    border: none;\n    border-radius: 5px;\n    padding: 0 10px;\n    width: 100%;\n    height: 30px;\n}",""]);const a=s},312:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var l=0;l<t.length;l++){var u=[].concat(t[l]);r&&s[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),e.push(u))}},e}},500:t=>{"use strict";t.exports=function(t){return t[1]}},596:t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},s=[],a=0;a<t.length;a++){var c=t[a],l=r.base?c[0]+r.base:c[0],u=i[l]||0,h="".concat(l," ").concat(u);i[l]=u+1;var d=n(h),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=o(p,r);r.byIndex=a,e.splice(a,0,{identifier:h,updater:f,references:1})}s.push(h)}return s}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var i=r(t=t||[],o=o||{});return function(t){t=t||[];for(var s=0;s<i.length;s++){var a=n(i[s]);e[a].references--}for(var c=r(t,o),l=0;l<i.length;l++){var u=n(i[l]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}i=c}}},176:t=>{"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},808:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},120:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},520:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},936:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},636:(t,e,n)=>{var r=n(848).default;function o(){"use strict";t.exports=o=function(){return n},t.exports.__esModule=!0,t.exports.default=t.exports;var e,n={},i=Object.prototype,s=i.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",h=c.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(e){d=function(t,e,n){return t[e]=n}}function p(t,e,n,r){var o=e&&e.prototype instanceof x?e:x,i=Object.create(o.prototype),s=new _(r||[]);return a(i,"_invoke",{value:T(t,n,s)}),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=p;var m="suspendedStart",v="suspendedYield",g="executing",y="completed",b={};function x(){}function w(){}function k(){}var L={};d(L,l,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(q([])));E&&E!==i&&s.call(E,l)&&(L=E);var C=k.prototype=x.prototype=Object.create(L);function $(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(o,i,a,c){var l=f(t[o],t,i);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==r(h)&&s.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}})}function T(t,n,r){var o=m;return function(i,s){if(o===g)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw s;return{value:e,done:!0}}for(r.method=i,r.arg=s;;){var a=r.delegate;if(a){var c=B(a,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===m)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=g;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?y:v,l.arg===b)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=y,r.method="throw",r.arg=l.arg)}}}function B(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,B(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=f(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var s=i.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function q(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(s.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(r(t)+" is not iterable")}return w.prototype=k,a(C,"constructor",{value:k,configurable:!0}),a(k,"constructor",{value:w,configurable:!0}),w.displayName=d(k,h,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,d(t,h,"GeneratorFunction")),t.prototype=Object.create(C),t},n.awrap=function(t){return{__await:t}},$(I.prototype),d(I.prototype,u,(function(){return this})),n.AsyncIterator=I,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var s=new I(p(t,e,r,o),i);return n.isGeneratorFunction(e)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},$(C),d(C,h,"Generator"),d(C,l,(function(){return this})),d(C,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=q,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=s.call(i,"catchLoc"),l=s.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:q(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},n}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},848:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},248:(t,e,n)=>{var r=n(636)();t.exports=r;try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{"use strict";var t=n(596),e=n.n(t),r=n(520),o=n.n(r),i=n(176),s=n.n(i),a=n(120),c=n.n(a),l=n(808),u=n.n(l),h=n(936),d=n.n(h),p=n(904),f={};function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function g(t){var e=function(t,e){if("object"!=v(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==v(e)?e:String(e)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g(r.key),r)}}function b(t,e,n){return e&&y(t.prototype,e),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function x(t,e,n){return(e=g(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w(t,e,n,r,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,o)}function k(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function s(t){w(i,r,o,s,a,"next",t)}function a(t){w(i,r,o,s,a,"throw",t)}s(void 0)}))}}f.styleTagTransform=d(),f.setAttributes=c(),f.insert=s().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=u(),e()(p.c,f),p.c&&p.c.locals&&p.c.locals;var L=n(248),S=n.n(L);class E{listeners;onceListeners;value;constructor(t){this.value=t,this.listeners=[],this.onceListeners=[]}subscribe(t){return this.listeners.push(t),{unsubscribe:()=>{this.listeners=this.listeners.filter((e=>e!==t))}}}next(t){this.value=t,this.listeners.forEach((e=>{e(t)})),this.onceListeners.forEach((e=>{e(t)})),this.onceListeners=[]}once(t){this.onceListeners.push(t)}getValue(){return this.value}setValue(t){this.value=t}unsubscribeAll(){this.listeners=[]}}var C=function(){function t(e,n,r){var o=this;m(this,t),x(this,"url",void 0),x(this,"urlWebSocket",void 0),x(this,"webSocket",void 0),x(this,"event$",void 0),x(this,"controller",void 0),this.controller=r,this.url=e,this.urlWebSocket=n,this.webSocket=new WebSocket("".concat(n,"?token=").concat(localStorage.getItem("jwt"))),this.webSocket.onclose=function(t){return setTimeout((function(){t.wasClean||o.wsReconect()}),3e3)},this.event$=new E,this.init()}var e,n,r,o,i,s,a,c,l;return b(t,[{key:"sendRequest",value:(l=k(S().mark((function t(e,n,r){var o,i,s,a;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o="".concat(this.url,"/").concat(e),i={"Content-Type":"application/json",Authorization:localStorage.getItem("jwt")||""},s={method:r,headers:i},"GET"!==r&&(s.body=JSON.stringify(n)),t.prev=4,t.next=7,fetch(o,s);case 7:return a=t.sent,t.next=10,a.json();case 10:return t.abrupt("return",t.sent);case 13:return t.prev=13,t.t0=t.catch(4),t.abrupt("return",Promise.reject(t.t0));case 16:case"end":return t.stop()}}),t,this,[[4,13]])}))),function(t,e,n){return l.apply(this,arguments)})},{key:"init",value:function(){this.receiveMessage()}},{key:"receiveMessage",value:function(){var t=this;this.webSocket.addEventListener("message",(function(e){return t.event$.next(JSON.parse(e.data))}))}},{key:"checkAuth",value:(c=k(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendRequest("api/checkValidToken",{},"GET");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"push",value:(a=k(S().mark((function t(e){var n,r=this;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=function t(){r.webSocket.send(JSON.stringify(e)),r.webSocket.removeEventListener("open",t)},this.webSocket.readyState===WebSocket.OPEN?n():(this.wsReconect(),this.webSocket.addEventListener("open",n));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"login",value:(s=k(S().mark((function t(e){var n;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendRequest("api/login",e,"POST");case 2:return"OK"===(n=t.sent).status&&(localStorage.setItem("jwt",n.jwt),localStorage.setItem("email",n.email),this.controller.isAuth$.next(!0)),this.wsReconect(),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"register",value:(i=k(S().mark((function t(e,n){var r;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendRequest("api/register",{loginValue:e,options:n},"POST");case 2:return"OK"===(r=t.sent).status&&(localStorage.setItem("jwt",r.jwt),localStorage.setItem("email",r.email),this.controller.isAuth$.next(!0)),this.wsReconect(),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"getChats",value:(o=k(S().mark((function t(e){var n;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=6;break}return t.next=3,this.sendRequest("api/chats",{},"GET");case 3:n=t.sent,t.next=9;break;case 6:return t.next=8,this.sendRequest("api/chats?id=".concat(e),{},"GET");case 8:n=t.sent;case 9:return t.abrupt("return",n);case 10:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"getFriendsInvites",value:(r=k(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendRequest("api/getFriendsInvite",{},"GET");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"getFriends",value:(n=k(S().mark((function t(){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendRequest("api/getFriends",{},"GET");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"getUser",value:(e=k(S().mark((function t(e){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sendRequest("api/getUser?login=".concat(e),null,"GET");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"wsReconect",value:function(){var t=this;this.webSocket.close(),this.webSocket=new WebSocket("".concat(this.urlWebSocket,"?token=").concat(localStorage.getItem("jwt"))),this.receiveMessage(),this.webSocket.onclose=function(e){return setTimeout((function(){e.wasClean||t.wsReconect()}),3e3)}}}]),t}();function $(t){const e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var T=n(532),B={};B.styleTagTransform=d(),B.setAttributes=c(),B.insert=s().bind(null,"head"),B.domAPI=o(),B.insertStyleElement=u(),e()(T.c,B),T.c&&T.c.locals&&T.c.locals;var A=function(){function t(e){m(this,t),x(this,"options",void 0),x(this,"inputs",void 0),this.options=e,this.inputs=[]}return b(t,[{key:"createAuthBlock",value:function(){var t=this,e=$('\n    <form class="authForm">\n        <button type="submit" class="submitAuth"></button>\n        <span class="authError"></span>\n    </form>>\n'),n=e.querySelector(".submitAuth"),r=e.querySelector(".authError");return n.textContent=this.options.buttonName,this.options.inputs.forEach((function(e){var r=function(t,e=[]){let n=document.createElement(t);if(Array.isArray(e))for(let t=0;t<e.length;t++){const r=e[t];n.classList.add(r)}return n}("input");r.placeholder=e.placeHolder,t.inputs.push(r),n.insertAdjacentElement("beforebegin",r)})),n.onclick=function(){var n=k(S().mark((function n(o){var i,s,a;return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o.preventDefault(),t.inputs.forEach((function(e,n){new RegExp(t.options.inputs[n].regExp).test(e.value)?e.style.boxShadow="":(e.style.boxShadow="0 0 3px red",e.value="",s=!0)})),!s){n.next=4;break}return n.abrupt("return");case 4:a=t.inputs.map((function(t){return t.value})),(i=t.options).callback.apply(i,(c=a,function(t){if(Array.isArray(t))return I(t)}(c)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(c)||function(t,e){if(t){if("string"==typeof t)return I(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(t,e):void 0}}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{error:function(t){r.textContent=t},ok:function(){r.textContent="",e.style.boxShadow="0 0 3px green",setTimeout((function(){return e.style.boxShadow=""}),3e3)}}])),t.inputs.map((function(t){return t.value=""}));case 7:case"end":return n.stop()}var c}),n)})));return function(t){return n.apply(this,arguments)}}(),e}}]),t}(),P=b((function t(e,n){return m(this,t),"login"===e?new A({buttonName:"–í–æ–π—Ç–∏",inputs:[{placeHolder:"email",regExp:"^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$"},{placeHolder:"password",regExp:"^[a-zA-Z0-9!@#$%^&*()_+{}\\[\\]:;<>,.?~\\\\-]+$"}],callback:(o=k(S().mark((function t(e,r,o){var i;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.login({email:e,password:r});case 2:"ERROR"===(i=t.sent).status?o.error(i.Error):"OK"===i.status&&o.ok();case 4:case"end":return t.stop()}}),t)}))),function(t,e,n){return o.apply(this,arguments)})}):"register"===e?new A({buttonName:"–ó–∞—Ä–µ–≥–µ—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—Å—è",inputs:[{placeHolder:"email",regExp:"^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$"},{placeHolder:"password",regExp:"^[a-zA-Z0-9!@#$%^&*()_+{}\\[\\]:;<>,.?~\\\\-]+$"},{placeHolder:"name",regExp:"^[a-zA-Z–∞-—è–ê-–Ø]+(?:-[a-zA-Z–∞-—è–ê-–Ø]+)*$"}],callback:(r=k(S().mark((function t(e,r,o,i){var s;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.register({email:e,password:r},{name:o});case 2:"ERROR"===(s=t.sent).status?i.error(s.Error):"OK"===s.status&&i.ok();case 4:case"end":return t.stop()}}),t)}))),function(t,e,n,o){return r.apply(this,arguments)})}):void 0;var r,o})),_=function(){function t(){m(this,t),x(this,"controller",void 0),this.controller=mt.getInstance()}return b(t,[{key:"createAuthBlock",value:function(){var t=this,e=$('\n    <div class="authBlock">\n    \n    </div>\n'),n=function(n){var r=new P("login",t.controller.server),o=new P("register",t.controller.server);if(n)e.innerHTML="";else{if(e.innerHTML.trim())return;e.appendChild(r.createAuthBlock()),e.appendChild(o.createAuthBlock())}};return this.controller.isAuth$.subscribe((function(t){n(t)})),n(this.controller.isAuth$.getValue()),e}}]),t}(),q=n(256),G={};G.styleTagTransform=d(),G.setAttributes=c(),G.insert=s().bind(null,"head"),G.domAPI=o(),G.insertStyleElement=u(),e()(q.c,G),q.c&&q.c.locals&&q.c.locals;var j=n(160),O={};O.styleTagTransform=d(),O.setAttributes=c(),O.insert=s().bind(null,"head"),O.domAPI=o(),O.insertStyleElement=u(),e()(j.c,O),j.c&&j.c.locals&&j.c.locals;var M=function(){function t(){m(this,t),x(this,"controller",void 0),x(this,"addFriendBlock",void 0),x(this,"addFriend$",void 0),this.controller=mt.getInstance(),this.addFriend$=new E}return b(t,[{key:"createElement",value:function(){var t=this,e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;this.addFriendBlock=$('\n    <div class="addFriend">\n        <input type="text">\n        <button>–î–æ–±–∞–≤–∏—Ç—å –≤ –¥—Ä—É–∑—å—è</button>\n    </div>\n');var n=this.addFriendBlock.querySelector("button"),r=this.addFriendBlock.querySelector("input");return n.onclick=function(){var n;r.value&&(e.test(r.value)?(t.addFriend$.next(r.value),r.style.boxShadow="",n=r.value,mt.getInstance().server.push({command:"friendRequest",payload:{login:n}}),r.value=""):r.style.boxShadow="0 0 3px #ff0000")},this.addFriendBlock}}]),t}();function F(t,e){return t?e?void t.appendChild(e):"–≠–ª–µ–º–µ–Ω—Ç –Ω–µ –≤–∞–ª–∏–¥–µ–Ω":"–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –≤–∞–ª–∏–¥–µ–Ω"}var U=n(424),R={};R.styleTagTransform=d(),R.setAttributes=c(),R.insert=s().bind(null,"head"),R.domAPI=o(),R.insertStyleElement=u(),e()(U.c,R),U.c&&U.c.locals&&U.c.locals;var D=n(880),z={};z.styleTagTransform=d(),z.setAttributes=c(),z.insert=s().bind(null,"head"),z.domAPI=o(),z.insertStyleElement=u(),e()(D.c,z),D.c&&D.c.locals&&D.c.locals;var H=function(){function t(e,n){m(this,t),x(this,"modal",void 0),x(this,"modalContent",void 0),x(this,"overlay",void 0),x(this,"close$",void 0),x(this,"content",void 0),x(this,"idContent",void 0),this.close$=new E,this.content=e,this.idContent=n,this.startRender()}return b(t,[{key:"setOptions",value:function(t){var e=this,n={width:function(t){return e.modal.style.width="".concat(t)},maxWidth:function(t){return e.modal.style.maxWidth="".concat(t)},height:function(t){return e.modal.style.height="".concat(t)},maxHeight:function(t){return e.modal.style.width="".concat(t)},bgColor:function(t){return e.modal.style.backgroundColor="".concat(t)},bgOverlayColor:function(t){return e.overlay.style.backgroundColor="".concat(t)},padding:function(t){return e.modal.style.padding=t},borderRadius:function(t){return e.modal.style.borderRadius=t}};if(this.modal&&this.overlay)for(var r in t)n[r]&&n[r](t[r])}},{key:"startRender",value:function(){var t=this;this.modal=$('\n  <div class="modal">\n    <span class="close-btn">√ó</span>\n    <div class="modal-content" id="null"></div>\n   </div>\n');var e=this.modal.querySelector(".close-btn");e.addEventListener("click",(function(){return t.close()})),this.modalContent=this.modal.querySelector(".modal-content"),this.modalContent.id&&(this.modalContent.id=this.idContent),"string"==typeof this.content?this.modalContent.innerHTML=this.content:this.content&&F(this.modalContent,this.content),this.overlay=$('\n  <div class="overlay"></div>\n'),this.overlay.addEventListener("click",(function(){return t.close()})),F(this.modal,e),F(this.modal,this.modalContent)}},{key:"render",value:function(){F(mt.getInstance().root,this.modal),F(mt.getInstance().root,this.overlay)}},{key:"open",value:function(){this.render(),document.body.style.overflow="hidden",this.modal.style.display="block",this.overlay.style.display="block"}},{key:"close",value:function(){document.body.style.overflow="initial",this.modal.style.display="none",this.overlay.style.display="none",this.modal.remove(),this.overlay.remove(),this.close$.next()}},{key:"destroy",value:function(){this.modal.remove(),this.overlay.remove()}},{key:"setContent",value:function(t){"string"==typeof t?this.modalContent.innerHTML=t:t&&F(this.modalContent,t)}}]),t}();function V(){return(V=k(S().mark((function t(){var e,n;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=mt.getInstance(),t.next=3,e.server.getFriendsInvites();case 3:if("OK"!==(n=t.sent).status){t.next=6;break}return t.abrupt("return",n.requests);case 6:return t.abrupt("return",void 0);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function N(){return W.apply(this,arguments)}function W(){return(W=k(S().mark((function t(){var e,n;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=mt.getInstance(),t.next=3,e.server.getFriends();case 3:if("OK"!==(n=t.sent).status){t.next=6;break}return t.abrupt("return",n.requests);case 6:return t.abrupt("return",void 0);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function K(t){return J.apply(this,arguments)}function J(){return(J=k(S().mark((function t(e){var n,r;return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=mt.getInstance(),t.next=3,n.server.getChats(e);case 3:if("OK"!==(r=t.sent).status){t.next=6;break}return t.abrupt("return",r.data);case 6:return t.abrupt("return",void 0);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Z=function(){function t(){m(this,t),x(this,"controller",void 0),x(this,"modal",void 0),x(this,"friendsList",void 0),x(this,"openButton",void 0),x(this,"list$",void 0),this.list$=new E([]),this.controller=mt.getInstance(),this.init()}return b(t,[{key:"init",value:function(){var t=this,e=$('\n    <button class="friendListButton">–û—Ç–∫—Ä—ã—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π –≤ –¥—Ä—É–∑—å—è</button>\n'),n=$('\n<div class="friendsListBlock">\n        <span class="requestForFrend">–ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –¥—Ä—É–∂–±—É</span>\n        <div class="friendsList">\n\n        </div>\n    </div>\n');this.friendsList=n.querySelector(".friendsList"),this.modal=new H(n),this.modal.setOptions({padding:"0px"}),e.onclick=function(){return t.modal.open()},this.openButton=e;var r=$('\n    <span class="friendsEmpty">–¢—É—Ç –±—É–¥—É—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –¥—Ä—É–∂–±—Éüò™</span>\n');this.friendsList.appendChild(r),this.list$.subscribe((function(e){if(0===e.length){if(t.friendsList.querySelector(".friendsEmpty"))return;t.friendsList.appendChild(r)}else r.remove()})),function(){return V.apply(this,arguments)}().then((function(e){return e?t.setList(e):null})),this.controller.server.event$.subscribe((function(e){"friendRequest"===e.command&&t.pushList(e.payload.from)}))}},{key:"createElement",value:function(){return this.openButton}},{key:"setList",value:function(t){var e=this;this.friendsList.innerHTML="",t.forEach((function(t){e.pushList(t)})),this.list$.next(t)}},{key:"pushList",value:function(t){var e=this,n=$('\n    <div class="friend">\n        <div class="chatInfoBlock">\n            <img src="/" alt="" class="chatPhoto">\n            <span class="chat_name"></span>\n            <div class="submitFriendButtons">\n                <button class="accept_friend">–ü—Ä–∏–Ω—è—Ç—å</button>\n                <button class="reject_friend">–û—Ç–∫–ª–æ–Ω–∏—Ç—å</button>\n            </div>  \n        </div>\n        \n    </div>\n'),r=n.querySelector(".accept_friend"),o=n.querySelector(".reject_friend");r.onclick=function(){e.controller.server.push({command:"friendResponse",payload:{login:t,accept:!0}}),n.remove();var r=e.list$.getValue();r.splice(r.indexOf(t),1),e.list$.next(r)},o.onclick=function(){e.controller.server.push({command:"friendResponse",payload:{login:t,accept:!1}}),n.remove();var r=e.list$.getValue();r.splice(r.indexOf(t),1),e.list$.next(r)},n.querySelector(".chat_name").textContent=t;var i=this.list$.getValue();i.push(t),this.list$.next(i),F(this.friendsList,n)}}]),t}(),Y=n(736),Q={};Q.styleTagTransform=d(),Q.setAttributes=c(),Q.insert=s().bind(null,"head"),Q.domAPI=o(),Q.insertStyleElement=u(),e()(Y.c,Q),Y.c&&Y.c.locals&&Y.c.locals;var X=n(126),tt={};tt.styleTagTransform=d(),tt.setAttributes=c(),tt.insert=s().bind(null,"head"),tt.domAPI=o(),tt.insertStyleElement=u(),e()(X.c,tt),X.c&&X.c.locals&&X.c.locals;var et=function(){function t(){m(this,t),x(this,"controller",void 0),x(this,"modal",void 0),x(this,"friendsList",void 0),x(this,"openButton",void 0),x(this,"list$",void 0),x(this,"listUserToGroup",void 0),this.list$=new E([]),this.controller=mt.getInstance(),this.listUserToGroup=[],this.init()}return b(t,[{key:"init",value:function(){var t=this,e=$('\n    <button class="createGroup">–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É</button>\n'),n=$('\n<div class="createGroupMenu">\n        <div class="nameGropInput">\n             <span>–ò–º—è –≥—Ä—É–ø–ø—ã: </span>\n            <input type="text">\n        </div>\n        <div class="friendsList">\n            \n        </div>\n        <button class="createGroup">–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É</button>\n    </div>\n');this.friendsList=n.querySelector(".friendsList"),this.modal=new H(n),this.openButton=e,this.modal.setOptions({padding:"0px"}),e.onclick=function(){N().then((function(e){return e?t.setList(e):null})),t.modal.open()};var r=$('\n    <span class="friendsEmpty">–£ –≤–∞—Å –Ω–µ—Ç—É –¥—Ä—É–∑–µ–πüò™</span>\n');this.friendsList.appendChild(r),this.list$.subscribe((function(e){if(0===e.length){if(t.friendsList.querySelector(".friendsEmpty"))return;t.friendsList.appendChild(r)}else r.remove()}));var o=n.querySelector(".createGroup"),i=n.querySelector(".nameGropInput input");o.onclick=function(){i.value&&t.listUserToGroup.length>0&&(t.controller.server.push({command:"groupCreated",payload:{logins:t.listUserToGroup,groupName:i.value}}),i.value="",t.listUserToGroup=[],t.modal.close())}}},{key:"createElement",value:function(){return this.openButton}},{key:"setList",value:function(t){var e=this;this.friendsList.innerHTML="",t.forEach((function(t){e.pushList(t)})),this.list$.next(t)}},{key:"pushList",value:function(t){var e=this,n=$('\n    <div class="friend">\n        <div class="chatInfoBlock">\n            <img src="/" alt="" class="chatPhoto">\n            <span class="chat_name"></span>\n            <input type="checkbox">\n        </div>\n    </div>\n'),r=n.querySelector(".chat_name"),o=n.querySelector("input"),i=n.querySelector(".chatPhoto");this.controller.server.getUser(t).then((function(t){return i.src=t.user.photo})),o.onchange=function(n){n.target.checked?e.listUserToGroup.push(t):e.listUserToGroup.splice(e.listUserToGroup.indexOf(t),1)},r.textContent=t;var s=this.list$.getValue();s.push(t),this.list$.next(s),F(this.friendsList,n)}}]),t}(),nt=n(192),rt={};function ot(t){return t.sort((function(t,e){var n=new Date(t.history[t.history.length-1].timestamp),r=new Date(e.history[e.history.length-1].timestamp);return n>r?-1:n<r?1:0}))}rt.styleTagTransform=d(),rt.setAttributes=c(),rt.insert=s().bind(null,"head"),rt.domAPI=o(),rt.insertStyleElement=u(),e()(nt.c,rt),nt.c&&nt.c.locals&&nt.c.locals;var it=function(){function t(){var e=this;m(this,t),x(this,"controller",void 0),x(this,"chatListContainer",void 0),x(this,"selectChat$",void 0),x(this,"list$",void 0),this.controller=mt.getInstance(),this.list$=new E([]),this.selectChat$=new E,this.init(),K().then((function(t){return e.setList(ot(t))})),this.controller.server.event$.subscribe((function(t){if("groupCreated"===t.command)e.pushList(t.payload.group);else if("leaveGroup"===t.command){if(e.selectChat$.getValue()===t.payload.chatID&&localStorage.getItem("email")===t.payload.login){var n=e.list$.getValue();n=n.filter((function(e){return e.id!==t.payload.chatID})),e.setList(n),e.selectChat$.next(null)}}else"friendAddedToGroup"===t.command?localStorage.getItem("email")===t.payload.login&&K(t.payload.chatID).then((function(t){e.pushList(t[0])})):"message"===t.command&&e.setList(ot(e.list$.getValue()))}))}return b(t,[{key:"init",value:function(){this.chatListContainer=$('\n    <div class="chatList"></div>\n')}},{key:"createElement",value:function(){return this.chatListContainer}},{key:"setList",value:function(t){var e=this;this.chatListContainer.innerHTML="",t.forEach((function(t){e.pushList(t)})),this.list$.next(t)}},{key:"pushList",value:function(t){var e=this,n=$('\n    <div class="chatItem">\n         <img src="/" alt="" class="chatPhotoInList">\n         <div class="chatItemBlock">\n             <span class="chat_name"></span>\n             <span class="last_message"></span>\n         </div>\n    </div>\n'),r=n.querySelector(".chatPhotoInList");r.src=t.photo,n.onclick=function(){e.selectChat$.next(t.id);var n=new URL(window.location.href);n.searchParams.set("chatID",t.id),window.history.pushState({},document.title,n.toString())};var o=n.querySelector(".chat_name"),i=n.querySelector(".last_message");o.textContent=t.groupName;var s=t.history.sort((function(t,e){return new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()}))[0];i.textContent=s?s.text:"",this.controller.server.event$.subscribe((function(e){if("message"===e.command&&e.payload.to===t.id)i.textContent=e.payload.text;else if("setGroupPhoto"===e.command&&e.payload.chatID===t.id){var n=(new Date).getTime();r.src="".concat(r.src,"?timestamp=").concat(n)}}));var a=this.list$.getValue();a.push(t),this.list$.next(a),F(this.chatListContainer,n)}}]),t}(),st=function(){function t(){m(this,t),x(this,"controller",void 0),x(this,"selectChat$",void 0),this.controller=mt.getInstance(),this.selectChat$=new E}return b(t,[{key:"createElement",value:function(){var t=this,e=$('\n    <div class="sidePanel">\n    \n    </div>\n'),n=$('\n    <button class="leaveButton">–í—ã–π—Ç–∏</button>\n'),r=new M,o=new Z,i=new et,s=new it,a=$('\n    <form class="confingForm">\n            <input type="file" id="filePhotoLoad2" class="filePhotoLoad2" accept="jpg, .jpeg, .png" size="1000000"/>\n            <label for="filePhotoLoad2" class="loadPhotoBtn">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ</label>\n      </form>\n');s.selectChat$.subscribe((function(e){return t.selectChat$.next(e)})),n.onclick=function(){localStorage.setItem("jwt",null),t.controller.isAuth$.next(!1)};var c=a.querySelector(".filePhotoLoad2");return c.onchange=function(){var e,n=null===(e=c.files)||void 0===e?void 0:e[0];if(!n||"image/jpeg"!==n.type&&"image/png"!==n.type)alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª –≤ —Ñ–æ—Ä–º–∞—Ç–µ JPEG –∏–ª–∏ PNG."),c.value="";else{var r=new FileReader;r.onload=function(e){var n,r=null===(n=e.target)||void 0===n?void 0:n.result,o=new Uint8Array(r);t.controller.server.push({command:"setUserPhoto",payload:{photo:o}})},r.readAsArrayBuffer(n)}},F(e,n),F(e,r.createElement()),F(e,o.createElement()),F(e,i.createElement()),F(e,a),F(e,s.createElement()),e}}]),t}(),at=n(474),ct={};ct.styleTagTransform=d(),ct.setAttributes=c(),ct.insert=s().bind(null,"head"),ct.domAPI=o(),ct.insertStyleElement=u(),e()(at.c,ct),at.c&&at.c.locals&&at.c.locals;var lt=function(){function t(e){m(this,t),x(this,"controller",void 0),x(this,"modal",void 0),x(this,"friendsList",void 0),x(this,"openButton",void 0),x(this,"list$",void 0),x(this,"listUserToGroup",void 0),x(this,"selectChat$",void 0),this.selectChat$=e,this.list$=new E([]),this.controller=mt.getInstance(),this.listUserToGroup=[],this.init()}return b(t,[{key:"init",value:function(){var t=this,e=$('\n    <button class="addToGroup">–î–æ–±–∞–≤–∏—Ç—å –≤ –≥—Ä—É–ø–ø—É</button>\n'),n=$('\n<div class="createGroupMenu">\n        <div class="friendsList">\n            \n        </div>\n        <button class="addToGroupBtn">–î–æ–±–∞–≤–∏—Ç—å –≤ –≥—Ä—É–ø–ø—É</button>\n    </div>\n');this.friendsList=n.querySelector(".friendsList"),this.modal=new H(n),this.openButton=e,this.modal.setOptions({padding:"0px"}),e.onclick=function(){N().then((function(e){K(t.selectChat$.getValue()).then((function(n){return(e=e.filter((function(t){return!n[0].members.includes(t)})))?t.setList(e):null}))})),t.modal.open()};var r=$('\n    <span class="friendsEmpty">–£ –≤–∞—Å –Ω–µ—Ç—É –¥—Ä—É–∑–µ–πüò™ –∏–ª–∏ –æ–Ω–∏ –≤—Å–µ —É–∂–µ –≤ –≥—Ä—É–ø–ø–µ</span>\n');this.friendsList.appendChild(r),this.list$.subscribe((function(e){if(0===e.length){if(t.friendsList.querySelector(".friendsEmpty"))return;t.friendsList.appendChild(r)}else r.remove()})),n.querySelector(".addToGroupBtn").onclick=function(){t.listUserToGroup.length>0&&(t.listUserToGroup.forEach((function(e){t.controller.server.push({command:"friendAddedToGroup",payload:{login:e,chatID:t.selectChat$.getValue()}})})),t.listUserToGroup=[],t.modal.close())}}},{key:"createElement",value:function(){return this.openButton}},{key:"setList",value:function(t){var e=this;this.friendsList.innerHTML="",t.forEach((function(t){e.pushList(t)})),this.list$.next(t)}},{key:"pushList",value:function(t){var e=this,n=$('\n    <div class="friend">\n        <div class="chatInfoBlock">\n            <img src="/" alt="" class="chatPhoto">\n            <span class="chat_name"></span>\n            <input type="checkbox">\n        </div>\n    </div>\n'),r=n.querySelector(".chat_name"),o=n.querySelector("input"),i=n.querySelector(".chatPhoto");this.controller.server.getUser(t).then((function(t){return i.src=t.user.photo})),o.onchange=function(n){n.target.checked?e.listUserToGroup.push(t):e.listUserToGroup.splice(e.listUserToGroup.indexOf(t),1)},r.textContent=t;var s=this.list$.getValue();s.push(t),this.list$.next(s),F(this.friendsList,n)}}]),t}(),ut=function(){function t(e){m(this,t),x(this,"controller",void 0),x(this,"chatBlock",void 0),x(this,"messages$",void 0),x(this,"messagesBlock",void 0),x(this,"selectChat$",void 0),x(this,"userData",void 0),this.selectChat$=e,this.controller=mt.getInstance(),this.messages$=new E([]),this.userData={},this.init()}return b(t,[{key:"init",value:function(){var t=this;this.chatBlock=$('\n    <div class="chat">\n        \n        <div class="mainMessageBlock">\n\n        </div>\n        \n    </div>\n'),this.messagesBlock=this.chatBlock.querySelector(".mainMessageBlock"),this.selectChat$.subscribe(function(){var e=k(S().mark((function e(n){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:K(n).then((function(e){var n=e[0].history,r=e[0].groupName;t.chatBlock.querySelector(".chat_name").textContent=r,t.setMessages(n)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.controller.server.event$.subscribe((function(e){if("message"===e.command){if(e.payload.to!==t.selectChat$.getValue())return;t.pushMessage(e.payload)}}));var e=function(e){var n=t.chatBlock.querySelector(".sendBlock"),r=t.chatBlock.querySelector(".chatInfoBlock");if(e){if(n)return;var o=$('\n    <div class="sendBlock">\n        <input type="text">\n        <button>–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>\n    </div>\n'),i=$('\n    <div class="chatInfoBlock">\n        <span class="chat_name"></span>\n        <form class="confingForm">\n            <input type="file" id="filePhotoLoad" class="filePhotoLoad" accept="jpg, .jpeg, .png" size="1000000"/>\n            <label for="filePhotoLoad" class="loadPhotoBtn">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ</label>\n        </form>\n        <button class="leaveGroup">–í—ã–π—Ç–∏ –∏–∑ –≥—Ä—É–ø–ø—ã</button>\n    </div>\n'),s=o.querySelector(".sendBlock input"),a=o.querySelector(".sendBlock button"),c=i.querySelector(".filePhotoLoad"),l=i.querySelector(".leaveGroup"),u=new lt(t.selectChat$);l.insertAdjacentElement("beforebegin",u.createElement()),c.onchange=function(){var e,n=null===(e=c.files)||void 0===e?void 0:e[0];if(!n||"image/jpeg"!==n.type&&"image/png"!==n.type)alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª –≤ —Ñ–æ—Ä–º–∞—Ç–µ JPEG –∏–ª–∏ PNG."),c.value="";else{var r=new FileReader;r.onload=function(e){var n,r=null===(n=e.target)||void 0===n?void 0:n.result,o=new Uint8Array(r);t.controller.server.push({command:"setGroupPhoto",payload:{chatID:t.selectChat$.getValue(),photo:o}})},r.readAsArrayBuffer(n)}};var h=function(){s.value&&(t.controller.server.push({command:"message",payload:{from:localStorage.getItem("email"),to:t.selectChat$.getValue(),text:s.value}}),s.value="")};s.onkeydown=function(t){"Enter"===t.key&&h()},a.onclick=function(){h()},l.onclick=function(){t.controller.server.push({command:"leaveGroup",payload:{chatID:t.selectChat$.getValue(),login:localStorage.getItem("email")}})},F(t.chatBlock,o),t.chatBlock.insertAdjacentElement("afterbegin",i)}else{if(!n&&!r)return;n.remove(),r.remove()}};e(this.selectChat$.getValue()),this.selectChat$.subscribe((function(t){e(t)}))}},{key:"getElement",value:function(){return this.chatBlock}},{key:"setMessages",value:function(t){var e=this;this.messages$.next(t),this.messagesBlock.innerHTML="",t.forEach((function(t){e.pushMessage(t)}))}},{key:"pushMessage",value:function(t){var e=this,n=this.messages$.getValue();n.push(t),this.messages$.next(n);var r,o=t.text,i=new Date(t.timestamp),s=String(i.getHours()).padStart(2,"0"),a=String(i.getMinutes()).padStart(2,"0"),c="".concat(s,":").concat(a);t.from.toUpperCase()===localStorage.getItem("email").toUpperCase()?(r=$('\n    <div class="message me">\n        <img src="" alt="">\n         <div  class="messageData">\n            <div class="message_name">–î–µ–Ω–∏—Å–∫–∞</div>\n            <div class="message_text"></div>\n            <div class="message_date"></div>\n        </div>\n    </div>\n')).querySelector(".message_text").textContent=o:(r=$('\n    <div class="message from">\n        <img src="" alt="" class="userPhoto">\n        <div class="messageData">\n            <div class="message_name">–î–µ–Ω–∏—Å–∫–∞</div>\n            <div class="message_text"></div>\n            <div class="message_date"></div>\n        </div>\n    </div>\n')).querySelector(".message_text").textContent=o;var l=r.querySelector(".message_name");this.userData[t.from]?(l.textContent=this.userData[t.from].user,t.from.toUpperCase()!==localStorage.getItem("email").toUpperCase()&&(r.querySelector(".userPhoto").src=this.userData[t.from].photo)):this.controller.server.getUser(t.from).then((function(n){e.userData[t.from]={},e.userData[t.from].photo=n.user.photo,e.userData[t.from].user=n.user.name,l.textContent=e.userData[t.from].user,t.from.toUpperCase()!==localStorage.getItem("email").toUpperCase()&&(r.querySelector(".userPhoto").src=e.userData[t.from].photo)})),this.controller.server.event$.subscribe((function(e){if("setUserPhoto"===e.command&&e.payload.login===t.from&&t.from.toUpperCase()!==localStorage.getItem("email").toUpperCase()){var n=(new Date).getTime(),o=r.querySelector(".userPhoto");o.src="".concat(o.src,"?timestamp=").concat(n)}})),r.querySelector(".message_date").textContent=c,F(this.messagesBlock,r)}}]),t}(),ht=n(212),dt={};dt.styleTagTransform=d(),dt.setAttributes=c(),dt.insert=s().bind(null,"head"),dt.domAPI=o(),dt.insertStyleElement=u(),e()(ht.c,dt),ht.c&&ht.c.locals&&ht.c.locals;var pt=function(){function t(e){m(this,t),x(this,"controller",void 0),x(this,"containerMembersList",void 0),x(this,"membersListBlock",void 0),x(this,"selectChat$",void 0),x(this,"list$",void 0),this.selectChat$=e,this.controller=mt.getInstance(),this.list$=new E([]),this.init()}return b(t,[{key:"init",value:function(){var t=this;this.containerMembersList=$('\n    <div class="memberList">\n        <span class="membersText">–£—á–∞—Å—Ç–Ω–∏–∫–∏ –≥—Ä—É–ø–ø—ã:</span>\n        <div class="membersListBlock">\n            \n        </div>\n    </div>\n'),this.membersListBlock=this.containerMembersList.querySelector(".membersListBlock"),this.selectChat$.subscribe((function(e){K(e).then((function(e){t.setList(e[0].members)}))})),this.controller.server.event$.subscribe((function(e){if("leaveGroup"===e.command&&e.payload.chatID===t.selectChat$.getValue()){var n=t.list$.getValue();n=n.filter((function(t){return t!==e.payload.login})),t.setList(n)}else"friendAddedToGroup"===e.command&&t.pushList(e.payload.login)}))}},{key:"getElement",value:function(){return this.containerMembersList}},{key:"setList",value:function(t){var e=this;this.membersListBlock.innerHTML="",t.forEach((function(t){e.pushList(t)})),this.list$.next(t)}},{key:"pushList",value:function(t){var e=$('\n     <div class="memberItem">\n        <img src="/" alt="" class= "memberPhotoInList">\n        <div class="memberItemBlock">\n            <span class="chat_name"></span>\n            <span class="last_online">–ë—ã–ª –æ–Ω–ª–∞–π–Ω –≤ –ø—Ä–æ—à–ª–æ–º –≤–µ–∫–µ </span>\n        </div>\n    </div>\n'),n=e.querySelector(".chat_name"),r=e.querySelector(".memberPhotoInList");this.controller.server.getUser(t).then((function(t){n.textContent=t.user.name,r.src=t.user.photo})),this.controller.server.event$.subscribe((function(e){if("setUserPhoto"===e.command&&e.payload.login===t){var n=(new Date).getTime();r.src="".concat(r.src,"?timestamp=").concat(n)}}));var o=this.list$.getValue();o.push(t),this.list$.next(o),F(this.membersListBlock,e)}}]),t}(),ft=function(){function t(){m(this,t),x(this,"controller",void 0),this.controller=mt.getInstance()}return b(t,[{key:"createPageElement",value:function(){var t=$('\n    <div class="chatBlock">\n    \n    </div>\n'),e=function(e){if(e){var n=new URL(window.location.href).searchParams.get("chatID"),r=new st,o=new ut(r.selectChat$),i=new pt(r.selectChat$);t.appendChild(r.createElement()),t.appendChild(o.getElement()),r.selectChat$.subscribe((function(t){i.getElement().remove(),t&&o.getElement().insertAdjacentElement("afterend",i.getElement())})),n&&(r.selectChat$.next(n),o.getElement().insertAdjacentElement("afterend",i.getElement()))}else if(t.innerHTML="",!t.querySelector(".authBlock")){var s=new _;t.appendChild(s.createAuthBlock())}};return this.controller.isAuth$.subscribe((function(t){e(t)})),e(this.controller.isAuth$.getValue()),t}}]),t}(),mt=function(){function t(){var e=this;m(this,t),x(this,"server",void 0),x(this,"isAuth$",void 0),x(this,"root",void 0),this.root=document.getElementById("app"),this.isAuth$=new E,this.server=new C("https://e1080b93-7a1c-48f4-8c27-405c4b391647-00-301l9cfes7unb.janeway.replit.dev","wss:///e1080b93-7a1c-48f4-8c27-405c4b391647-00-301l9cfes7unb.janeway.replit.dev",this),this.server.checkAuth().then((function(t){e.isAuth$.next("OK"===t.status)})),this.isAuth$.once((function(){e.init()}))}return b(t,[{key:"init",value:function(){var t=this,e=function e(){var n=new ft;t.root.appendChild(n.createPageElement()),t.server.webSocket.removeEventListener("open",e)};this.server.webSocket.readyState===WebSocket.OPEN&&e(),this.server.webSocket.addEventListener("open",e)}}],[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}]),t}();x(mt,"instance",void 0);var vt=mt.getInstance();window.controller=vt,vt.server.event$.subscribe((function(t){return console.log(t)}))})()})();